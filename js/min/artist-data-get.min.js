$(function(){function onlyUnique(value,index,self){return self.indexOf(value)===index}$.ajax({url:"https://sheets.googleapis.com/v4/spreadsheets/1zd7Hg5FpmzwAigm699KMC0dbETxCY8cEHev2XxRNF58/values/A2:F1000?key=AIzaSyAdQED4n41OGr3U_Yxed9rT9y4gqx0VVGQ&majorDimension=ROWS",type:"GET",success:function(data){var values=data.values,artists=[],years=[],cyphers=[];$.each(values,function(i){var artist=values[i][0],year=values[i][1],freestyle=values[i][2],cypher=values[i][3],artistObj={name:artist,year:year,freestyle:freestyle,cypher:cypher};void 0!==cypher&&cyphers.push({cypher:cypher,year:year}),artists.push(artistObj),years.push(year)}),console.log(cyphers);var uniqueYears=years.filter(onlyUnique);$.each(uniqueYears,function(i){var yearBlock='<div class="year" data-year='+uniqueYears[i]+'><div class="year-title">'+uniqueYears[i]+'</div><div class="year-content"><div class="content-section"><h3>Cyphers</h3><div class="vid-container cyphers"></div></div><div class="vid-container artists"><h3></div></div></div>';$("#years .inner-section").append(yearBlock)}),$.each(cyphers,function(i){var cypherYear=cyphers[i].year,cypherID=cyphers[i].cypher,cypherBlock='<div class="cypher" data-cypher='+cypherID+"><div>"+cypherID+'</div><div class="cypher-artists"></div></div>';$("[data-cypher="+cypherID+"]").length<1&&$('[data-year="'+cypherYear+'"] .cyphers').append(cypherBlock)}),$.each(artists,function(i){var artistName=artists[i].name,artistYear=artists[i].year,artistCypher=(artists[i].freestyle,artists[i].cypher);$("[data-year="+artistYear+"] .artists").append("<div>"+artistName+"</div>"),$("[data-cypher="+artistCypher+"] .cypher-artists").append('<span class="cypher-artist">'+artistName+"</span>")})},error:function(data){}})});